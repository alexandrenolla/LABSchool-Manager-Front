<app-header></app-header>
<app-sidebar></app-sidebar>

<br><br><br>
<div class="container mt-5">
    <h2 class="text-center mb-5">Selecione um Aluno para Detalhes</h2>

    <div class="form-group mb-4">
        <label for="Aluno" class="mb-2"><strong>Aluno:</strong></label>
        <select class="form-control" id="aluno" (change)="onAlunoChanged($event)">
            <option value="" disabled selected>Selecione um aluno</option>
            <option *ngFor="let aluno of alunos" [value]="aluno.id">{{ aluno.nome }}</option>
        </select>
    </div>

    <div class="row">
        <!-- Left Column -->
        <div class="col-md-6 mb-4">
            <!-- Info do Aluno -->
            <div class="card shadow-sm mb-4" *ngIf="alunoSelecionado">
                <div class="card-header bg-info text-white">
                    <i class="bi bi-person"></i> Informações do Aluno
                </div>
                <div class="card-body">
                    <p><strong>Nome Completo:</strong> {{ alunoSelecionado.nome }}</p>
                    <p><strong>CPF:</strong> {{ alunoSelecionado.cpf }}</p>
                    <p><strong>Telefone:</strong> {{ alunoSelecionado.telefone }}</p>
                    <p><strong>Email:</strong> {{ alunoSelecionado.email }}</p>
                </div>
            </div>

            <!-- Endereço -->
            <div class="card shadow-sm mb-4" *ngIf="endereco">
                <div class="card-header bg-info text-white">
                    <i class="bi bi-house-door"></i> Endereço do Aluno
                </div>
                <div class="card-body">
                    <p><strong>Rua:</strong> {{ endereco.logradouro }}</p>
                    <p><strong>Número:</strong> {{ endereco.numero }}</p>
                    <p><strong>Complemento:</strong> {{ endereco.complemento }}</p>
                    <p><strong>Bairro:</strong> {{ endereco.bairro }}</p>
                    <p><strong>Cidade:</strong> {{ endereco.cidade }}</p>
                    <p><strong>Estado:</strong> {{ endereco.estado }}</p>
                    <p><strong>CEP:</strong> {{ endereco.cep }}</p>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="col-md-6">
            <!-- Histórico de Atendimentos -->
            <div class="card shadow-sm mb-4" *ngIf="alunoSelecionado && atendimentos.length">
                <div class="card-header bg-info text-white">
                    <i class="bi bi-clock-history"></i> Histórico de Atendimentos
                </div>
                <div class="card-body">
                    <ul class="list-group">
                        <li class="list-group-item" *ngFor="let atendimento of atendimentos">{{ atendimento.dataHora }} - {{ atendimento.descricao }}</li>
                    </ul>
                </div>
            </div>

            <!-- Exercícios -->
            <div class="card shadow-sm mb-4" *ngIf="alunoSelecionado && exercicios.length">
                <div class="card-header bg-info text-white">
                    <i class="bi bi-book"></i> Histórico de Exercícios
                </div>
                <div class="card-body">
                    <ul class="list-group">
                        <li class="list-group-item" *ngFor="let exercicio of exercicios">{{ exercicio.materia }} em {{ exercicio.dataConclusao }} - {{ exercicio.titulo }}</li>
                    </ul>
                </div>
            </div>

            <!-- Avaliações -->
            <div class="card shadow-sm mb-4" *ngIf="alunoSelecionado && avaliacoes.length">
                <div class="card-header bg-info text-white">
                    <i class="bi bi-pencil-square"></i> Histórico de Avaliações
                </div>
                <div class="card-body">
                    <ul class="list-group">
                        <li class="list-group-item" *ngFor="let avaliacao of avaliacoes">{{ avaliacao.materia }} em {{ avaliacao.dataRealizacao }} - Nota: {{ avaliacao.nota }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
